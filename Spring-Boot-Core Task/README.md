= 1주차 과제

요구사항

Spring Boot 프로젝트를 작성한다.

Spring Boot 3.2.5, Java 21 기준으로 작성한다.

제공하는 상수도 요금표와 회원 정보를 메모리에 로드하고, 로그인한 사용자가 상수도 요금을 계산할 수 있는 프로그램을 작성한다.

프로젝트는 CLI 를 통해서 input 을 받고 적절한 응답 값을 반환한다.

Spring Shell 방식을 추천

Spring Shell
Spring Shell 적용이 어렵다면, 다른 라이브러리를 사용하거나 직접 구현해도 된다. 다만 비즈니스 로직과 input 처리 부분의 코드는 분리하도록 한다.

ex) ApplicationRunner 에 Scanner 적용

함수나 명령어의 이름은 예제와 반드시 일치할 필요는 없다.
요금 계산은 단순히 구간금액(원) 과 사용량을 곱한 값을 사용하면 된다.
쉘 환경에서 통합테스트가 잘 안 되면 다음 옵션을 붙여주세요.
@SpringBootTest(properties = {"spring.shell.interactive.enabled=false"})

기능 (입출력 예제)
로그인 기능

Inline-image-2024-05-06 15.40.21.566.png

로그아웃 기능

Inline-image-2024-05-06 15.40.56.314.png

현재 접속 중인 계정 정보를 알 수 있는 기능

Inline-image-2024-05-06 15.47.28.990.png

지자체명 목록을 알 수 있는 기능

Inline-image-2024-05-06 15.48.08.744.png

업종 목록을 알 수 있는 기능

Inline-image-2024-05-06 15.49.23.377.png

구간금액을 알 수 있는 기능

Inline-image-2024-05-06 15.51.02.483.png

사용량에 따른 금액을 알 수 있는 기능 (한/영 지원)

Inline-image-2024-05-06 15.51.39.889.png
Inline-image-2024-05-06 15.53.16.406.png

사용자 로그인 기록을 로그로 남기는 기능

Inline-image-2024-05-06 15.57.50.799.png

사용자 조회 요청을 로그로 남기는 기능

Inline-image-2024-05-06 16.04.08.577.png

응답 값이 예제와 반드시 일치할 필요는 없으며, 아래의 요구 사항을 만족해야 한다.
파일을 파싱하는 스프링 빈을 생성 (인터페이스 필요)

Conditional 을 이용하여 Property 에 따라서 다른 빈을 사용하도록 설정해야 한다 (csv, json)

파일 파싱은 원하는 라이브러리를 import 해서 사용하면 됩니다.

라이브러리를 사용하는 것이 싫을 경우 직접 구현해도 됩니다.

property 값을 변경하는 것 만으로 csv 파일을 파싱하다가 json 파일을 파싱해야합니다.

사용자 결과 값(Output 포맷)을 생성하는 스프링 빈 생성 (인터페이스 필요)

Profile 에 따라서 영어 혹은 한글로 된 결과 값을 생성해야 한다.

Profile 에 따라 다른 빈을 사용해야한다.

profile 만 바꿔도 응답 값이 바뀌어야 한다.

로그인, 로그아웃을 구현한 스프링 빈을 생성 (반드시 인터페이스를 만들 필요는 없음)

로그인 관련 구현은 서버 메모리를 이용한다. (객체 이용)

단순 파일의 정보와 equals 비교를 통해서 로그인 시킵니다. (암호화 x)

로그인 기능 Aop 와 요금 조회 기능 Aop 생성 (각각의 Aop 범위 설정에 주의할 것)

로그인 관련 Aop 요구사항

사용자 로그인, 로그아웃 요청을 로깅하여 (id, pw) 평문으로 account.log 파일에 기록합니다. (실서비스에서는 이러면 안 됩니다.)

Aop 의 적용 범위 - login, logout 요청을 로깅

요금 조회 기능 Aop 요구사항

어떤 요청을 보냈는지와 어떤 사용자가 요청을 보냈는지를 price.log 파일에 기록한다.

로그인 하지 않은 사용자의 경우 Aop 에서 확인해서 오류를 반환하도록 합니다.

Aop 의 적용 범위 - login, logout 요청을 제외한 모든 요청

로그인 기능 Aop 와 요금 조회 기능 Aop 의 로그는 각각 다른 파일에 남기도록 설정합니다.

csv 및 json 파일의 경로는 외부 설정으로 받도록 설정합니다.

테스트 생성

커버리지는 50퍼센트를 넘길 것

예외 상황에 대한 테스트는 적용할 것

mock, spy 을 각각 1회 이상 적용할 것

통합테스트가 반드시 필요하지는 않음

논리 설계 (참고용)

예제 실행 방법
java -jar demo-0.0.1-SNAPSHOT.jar

java -jar -Dspring.profiles.active=kor demo-0.0.1-SNAPSHOT.jar